Claude Code Prompt: Documentation Update (v33)
Task: Update the living changelog and review/update related documentation to reflect all changes made on December 15, 2025.

Part 1: Update docs/99_LIVING_CHANGELOG.md
Add the following entry at the top of the changelog, right after the "## [Unreleased]" section and before any existing dated entries:
markdown---

## [0.1.5] - Dashboard Polish & Bug Fixes (December 15, 2025)

### Added
- **4-Level Progress Visualization:** Chapter progress bars and HeroStats ring now show depth of knowledge
  - Mastered (#1e3a5f): stability >= 21 days, fsrs_state = 2
  - Familiar (#0369a1): stability 7-20 days, fsrs_state = 2
  - Learning (#38bdf8): stability < 7 days OR fsrs_state IN (1, 3)
  - Not Seen (#d6d3d1): no progress record
  - New `StackedProgressBar` component in ChapterCarousel
  - New `categorizeByLevel()` helper function in Dashboard
- **Animated Streak Pill:** Header streak indicator auto-expands on page load showing "X days", collapses after 3 seconds, click to toggle
- **Netlify SPA Routing:** Added `public/_redirects` file to fix 404 errors on page refresh or direct URL access on mobile

### Fixed
- **Streak Calculation Bug:** `updateStreak()` was always setting streak to 1 - now properly counts consecutive days by checking each expected date has activity
- **Streak Display:** Both header pill and Activity heatmap now show correct streak count
- **Longest Streak Tracking:** Now updates `longest_streak`, `longest_streak_start`, `longest_streak_end` when current exceeds previous best
- **Forecast "Today" Count:** Now includes all overdue cards from previous days using `.lte('due_date', endISO)` instead of date range
- **"Learn New" Count Mismatch:** Dashboard's `getChaptersThroughCurrent()` now uses same 95% unlock threshold as session builder's `getUnlockedChapterIds()` - button count matches actual session content
- **HeroStats Frame:** Removed unnecessary white card frame around progress ring for cleaner look
- **Redundant "TODAY" Label:** Removed duplicate "TODAY" text above forecast bar (label below is sufficient)

### Changed
- `fetchStreakData()` rewritten to calculate streak from consecutive days instead of trusting stored values
- `fetchActivityData()` now calculates streak from activity map and queries `longest_streak` from database
- `updateDailyStats()` no longer hardcodes `current_streak: 1` on insert
- `fetchForecastData()` uses conditional logic: `.lte()` for today, `.gte().lt()` range for future days
- `getChaptersThroughCurrent()` checks if PREVIOUS chapter >= 95% complete to include current chapter (aligned with session builder)
- `DashboardHeader.jsx` completely rewritten with useState for expand/collapse animation
- `HeroStats.jsx` now receives and displays `familiarCount` and `learningCount` props
- `ChapterCarousel.jsx` chapter objects now include `mastered`, `familiar`, `learning`, `notSeen` counts

### Technical Details
- New files: `public/_redirects`
- Modified files: `Dashboard.jsx`, `HeroStats.jsx`, `ChapterCarousel.jsx`, `DashboardHeader.jsx`, `ReviewForecast.jsx`, `useProgressTracking.js`

---
Also update the "Last Updated" date at the top of the file to "December 15, 2025".

Part 2: Review and Update Related Documentation
Check these documentation files and update if needed:
docs/04_LEARNING_ALGORITHM.md

Add section on "Progress Visualization Levels" explaining the 4-tier system (Mastered/Familiar/Learning/Not Seen) and their FSRS criteria
Update any references to the old binary "introduced/not introduced" tracking

docs/06_UI_DESIGN_SYSTEM.md

Add the 4-level progress color palette:

Mastered: #1e3a5f (near-black blue)
Familiar: #0369a1 (dark blue)
Learning: #38bdf8 (medium blue)
Not Seen: #d6d3d1 (gray)


Document the animated streak pill behavior

docs/08_DEPLOYMENT.md

Add note about public/_redirects file for Netlify SPA routing
Explain that this file is required to prevent 404 errors on page refresh

docs/10_ANALYTICS_METRICS.md

Update streak calculation documentation to reflect the new consecutive-days logic
Note that user_daily_stats.current_streak is now properly maintained


Part 3: Verify Consistency
After making updates, verify:

All color hex codes are consistent across documentation
FSRS thresholds (7 days, 21 days) match between code and docs
95% unlock threshold is documented consistently
No references to old "troubleWords" or single-color progress bars remain


Summary of December 15 Changes
CategoryChangeVisual4-level stacked progress bars (Mastered/Familiar/Learning/Not Seen)VisualAnimated streak pill in headerVisualRemoved HeroStats card frameBug FixStreak calculation (was always 1)Bug FixForecast Today includes overdueBug FixLearn New count matches session builderInfrastructureNetlify SPA routing fix